<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<style>
			#searchInput {
				width: 280px;
				height: 30px;
				margin: 7px;
				border-radius: 20px;
				border-style: hidden;
			}
			
			span {
				color: gray;
			}
			.hot-search-btn{
				border: hidden;
				background: gainsboro;
				margin-bottom: 5px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<input type="text" id="searchInput" placeholder="输入服务项或服务内容"></input>
			<span  id="searchBtn" class="mui-pull-right" style="margin-top: 10px;color: #ff2600;">搜索</span>
		</header>
		<div class="mui-content">
			<div class="mui-row">
				<span class="mui-pull-left" style="margin: 5px;">历史搜索</span>
				<button class="mui-pull-right">清空历史</button>
			</div>
			<div class="mui-content">
				<span style="margin: 5px;">热门搜索</span>
				<div class="mui-row" id="mui-template">
					<script type="text/template" id="temp">
						<% for(var i in record){ var item=record[i]; %>
						<button type="button" class="hot-search-btn"><%=item%></button>
						<%}%>
					</script>
				</div>
			</div>
		</div>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/app.js"></script>
		<script type="text/javascript" src="js/arttmpl.js"></script>
		<script type="text/javascript">
			mui.plusReady(function() {
				var hotSearchParam = {
					service: 'Hlbr365app.Member.GetHotSearch'
				};
				wAjax(hotSearchParam, function(result) {
					var hotList = result.data.info;
					var str = template('temp', {
						"record": hotList
					});
					document.getElementById("mui-template").innerHTML = str;

				})
				
				document.getElementById('searchBtn').addEventListener('tap', function(){
					var input = document.getElementById('searchInput').value;
					if(!input){
						plus.nativeUI.toast("请输入内容!");
						return;
					}
					searchGoods(input);
				})
			})
			
			function searchGoods(input){
				console.log(input);
				mui.openWindow({
					url: 'service_list.html',
					id: 'service_list.html',
					extras: {
						input: input
					} 
				});
			}
			
			mui("#mui-template").on('tap', 'button', function(e) {
//				var id = this.getAttribute("id");
//				var first_id = this.getAttribute('name');
				var name = this.innerHTML;
				searchGoods(name);
//				mui.openWindow({
//					url: 'service_list.html',
//					id: 'service_list.html',
//					extras: {
//						type_id: id,
//						first_id: first_id,
//						name: name
//					} 
//				});
			});
		</script>
	</body>

</html>