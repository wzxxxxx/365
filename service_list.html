<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<style>
			.mui-row {
				height: 50px;
				background: white;
			}
			
			.mui-text-center {
				line-height: 50px;
			}
			
			.line {
				width: 100%;
				height: 1px;
				background: gainsboro;
			}
			
			.fengeline {
				float: right;
				color: gainsboro;
			}
			.mui-bar{
				background: red;
 			}
 			.mui-title{
 				color: white;
 			}
 			.mui-pull-left{
 				color: white;
 			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" >
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">服务</h1>
		</header>
		<div class="mui-content">
			<div class="mui-row">
				<div class="mui-col-sm-6 mui-col-xs-6 mui-text-center" id="city_name">
					海拉尔
					<span  class="fengeline">|</span>
				</div>
				<!--<div class="mui-text-center fengeline">|</div>-->
				<div class="mui-col-sm-6 mui-col-xs-6 mui-text-center" id="service_name">
					家庭保洁
				</div>
			</div>
			<div class="mui-card">
				<ul class="mui-table-view" id="mui-template">
					<script type="text/template" id="temp">
						<% for(var i in record){ var item=record[i]; %>
						<li class="mui-table-view-cell mui-media">
							<a href="javascript:;">
								<img class="mui-media-object mui-pull-left" src="<%=item.jd_img%>">
								<div class="mui-media-body">
									<%=item.jd_name%>
									<p class='mui-ellipsis'>
										<%=item.jd_intro%>
									</p>
									<!--<p class="mui-ellipsis">
									<%=item.ar_reads%>
								</p>-->
								</div>
							</a>
						</li>
						<%}%>
					</script>
				</ul>
			</div>
			<!--<div class="line"></div>-->
		</div>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/app.js" ></script>
		<script type="text/javascript" src="js/arttmpl.js" ></script>
		<script type="text/javascript">
			var city_id = '150702';
			mui.plusReady(function(){
				var self = plus.webview.currentWebview();
				if(self.id){
					getGoodsList(self.id);
				}
				
			})
			
			function getGoodsList(typeID) {
				var goodsListWithInfo = [];
				var goodsParam = {
					service: 'Hlbr365app.Goods.GetServiceList',
					two_type_id: typeID,
					city_id: city_id,
					firstRow: 1, 
					listRows: 20
				}			
				wAjax(goodsParam, function(result) {
					var goodsList = result.data.list;
					console.log(JSON.stringify(goodsList));
//					for(var i = 0; i < goodsList.length; i++) {
//						var goodsWithInfo = getGoodsInfo(goodsList[i].jg_id) || {};
//						goodsListWithInfo.push(goodsWithInfo);
//					}

					var str = template('temp', {
						'record': goodsList
					});
					document.getElementById("mui-template").innerHTML = str;

				})
			}

			function getGoodsInfo(goodsId) {
				var infoParam = {
					service: 'Hlbr365app.Goods.GetGoodsInfo',
					jg_id: goodsId
				}
				wAjax(infoParam, function(result) {
					var goodsInfo = result.data.info;
					return goodsInfo;
				})
			}
		</script>
	</body>

</html>