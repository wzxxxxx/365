<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<style>
			.mui-text-center {
				line-height: 50px;
			}
			/*.line {
				width: 100%;
				height: 1px;
				background: gainsboro;
			}
			*/
			/*.fengeline {
				float: right;
				color: gainsboro;
			}*/
			
			.span-center {
				width: 100%;
				float: right;
				text-align: center;
				font-size: smaller;
				/*padding-bottom: 10px;
				padding-top: 10px;*/
			}
			
			.img-center {
				clear: both;
				display: block;
				margin: auto;
				width: 60px;
			}
			
			#firstTypeName {
				margin-left: 10px;
				color: grey;
			}
			
			#mui-template2 {
				margin-top: 20px;
			}
			
			button {
				border: hidden;
				background: gainsboro;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">
			<div class="mui-row">
				<div class="mui-col-sm-3 mui-col-xs-3" id="mui-template">
					<script type="text/template" id="temp">
						<% for(var i in record){ var item=record[i]; %>
						<div>
							<img src="<%=item.si_icon%>" class="img-center" id="<%=item.si_id%>" />
							<span class="span-center"><%=item.si_name%></span>
						</div>
						<%}%>
					</script>
				</div>
				<div class="mui-col-sm-9 mui-col-xs-9" style="background: white;height: 600px;">
					<div <div>
						<img id="firstTypeIcon" />
					</div>
					<div>
						<span id="firstTypeName"></span>
					</div>
					<div class="mui-row" id="mui-template2">
						<script type="text/template" id="temp2">
							<% for(var i in record){ var item=record[i]; %>
							<div class="mui-col-sm-6 mui-col-xs-6 mui-text-center">
								<button type="button" id="<%=item.si_id%>"><%=item.si_name%></button>
							</div>
							<%}%>
						</script>
					</div>

				</div>
			</div>
		</div>
		</div>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/app.js"></script>
		<script type="text/javascript" src="js/arttmpl.js"></script>
		<script type="text/javascript">
			var typeList = [];

			mui("#mui-template").on('tap', 'img', function(e) {
				var id = this.getAttribute("id");
				for(var i = 0; i < typeList.length; i++) {
					if(typeList[i].si_id == id) {
						document.getElementById('firstTypeIcon').src = typeList[i].si_icon;
						document.getElementById('firstTypeName').innerHTML = typeList[i].si_name;
					}
				}
				getSecondTypeList(id);
			});

			mui("#mui-template2").on('tap', 'button', function(e) {
				var id = this.getAttribute("id");
				mui.openWindow({
					url: 'service_list.html',
					id: 'service_list.html',
					extras: {
						id: id
					} //自定义扩展参数
//					show: {
//						autoShow: false, //页面loaded事件发生后自动显示，默认为true
//						event: 'loaded' //页面显示时机，默认为titleUpdate事件时显示
//					},
//					waiting: {
//						autoShow: true //自动显示等待框，默认为true
//					}
				});
			});

			mui.plusReady(function() {
				var typeListParam = {
					service: 'Hlbr365app.Goods.GetOneList'
				};

				wAjax(typeListParam, function(result) {
					typeList = result.data.info;
					var str = template('temp', {
						'record': typeList
					});
					document.getElementById("mui-template").innerHTML = str;
				});
			})

			function getSecondTypeList(firtTypeId) {
				var secTypeListParam = {
					service: 'Hlbr365app.Goods.GetTwoListByOne',
					si_id: firtTypeId
				}
				wAjax(secTypeListParam, function(result) {
					var sceTypeList = result.data.info.service;
					var str = template('temp2', {
						'record': sceTypeList
					});
					document.getElementById("mui-template2").innerHTML = str;
				})
			}

			//			function getGoodsList(typeID) {
			//				var goodsListWithInfo = [];
			//				var goodsParam = {
			//					service: 'Hlbr365app.Goods.GetServiceList',
			//					two_type_id: typeID,
			//					city_id: city_id,
			//					firstRow: 1,
			//					listRows: 20
			//				}
			//				wAjax(goodsParam, function(result) {
			//					var goodsList = result.data.list;
			//					for(var i = 0; i < goodsList.length; i++) {
			//						var goodsWithInfo = getGoodsInfo(goodsList[i].jg_id) || {};
			//						goodsListWithInfo.push(goodsWithInfo);
			//					}
			//
			//					var str = template('temp', {
			//						'record': goodsListWithInfo
			//					});
			//					document.getElementById("mui-template").innerHTML = str;
			//
			//				})
			//			}
			//
			//			function getGoodsInfo(goodsId) {
			//				var infoParam = {
			//					service: 'Hlbr365app.Goods.GetGoodsInfo',
			//					jg_id: goodsId
			//				}
			//				wAjax(infoParam, function(result) {
			//					var goodsInfo = result.data.info;
			//					return goodsInfo;
			//				})
			//			}
		</script>
	</body>

</html>